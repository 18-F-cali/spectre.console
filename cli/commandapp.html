<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="/assets/bootstrap/bootstrap.css" rel="stylesheet" />
        <link href="/assets/css/styles.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto+Slab:wght@400;700&family=Roboto:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet" data-no-mirror>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/themes/prism.css">

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/a1cad7ed9a.js" crossorigin="anonymous" data-no-mirror></script>
        <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/components/prism-core.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>

        <title>Spectre.Console - CommandApp</title>
    </head>
    <body class="d-flex flex-column">
        <div class="flex-grow-1 d-flex flex-column">

            <nav id="topnav" class="navbar navbar-expand-lg navbar-light">
                <div class="container py-3">
                    <a class="navbar-brand" href="/"><img id="logo" src="/assets/logo.svg" alt="Spectre.Console"> Spectre.Console</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarText">
                        <ul class="navbar-nav mr-auto">
                        </ul>
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link font-weight-light font-size-lg text-red" href="https://github.com/sponsors/patriksvensson"><i class="far fa-heart"></i> Sponsor</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link font-weight-light font-size-lg" href="https://github.com/spectreconsole/spectre.console"><i class="fab fa-github"></i> GitHub</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>


            <div class="flex-grow-1 d-flex  bg-body flex-column section-docs">
                    <div id="titlebar" class="py-4">
                        <div class="container">
                            <div class="row">
                                <div class="offset-md-3 offset-lg-2 px-3 px-md-0">
                                    <div class="section text-uppercase">Spectre.Console</div>
                                    <div class="text-white m-0 title">CommandApp</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="undertitle">
                        <div class="container bg-body">
                            <div class="row">
                                    <div class="col-md-3 col-lg-2 bg-body">
                                    </div>
                                    <div class="col-md-9 col-lg-8 bg-white">
                                    </div>
                                <div class="col-lg-2 d-none d-lg-block bg-section">
                                </div>
                            </div>
                        </div>
                    </div>

                <div class="flex-grow-1 d-flex flex-column bg-body">
                        <div class="container flex-grow-1 d-flex flex-column bg-white">
                            <div class="row flex-grow-1 align-items-stretch">
                                    <div class="sidebar col-md-3 col-lg-2 pt-2 bg-body">
                                            <div class="sidebar-nav-item">
<a href="/">Welcome</a>                                            </div>
                                                <div class="sidebar-nav-item">
<a href="/sponsors">Sponsors</a>                                                </div>
                                                <div class="sidebar-nav-item">
<a href="/quick-start">Quick Start</a>                                                </div>
                                                <div class="sidebar-nav-item">
<a href="/markup">Markup</a>                                                </div>
                                                <div class="sidebar-nav-item">
<a href="/exceptions">Exceptions</a>                                                </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/live">Live Displays</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/live/progress">Progress</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/live/status">Status</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/prompts">Prompts</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/prompts/text">Text prompt</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/prompts/selection">Selection</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/prompts/multiselection">Multi Selection</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/widgets">Widgets</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/widgets/table">Table</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/widgets/tree">Tree</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/widgets/barchart">Bar Chart</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/widgets/rule">Rule</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/widgets/calendar">Calendar</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/widgets/figlet">Figlet</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/widgets/canvas">Canvas</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/widgets/canvas-image">Canvas Image</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/cli">CLI</a>                                                </div>
                                                    <div class="sidebar-nav-children active">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/cli/getting-started">Getting Started</a>
                                                            </div>
                                                            <div class="sidebar-nav-child active">
                                                                <a href="/cli/commandapp">CommandApp</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/cli/settings">Specifying Settings</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/cli/commands">Creating Commands</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/cli/composing">Composing Commands</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/cli/migration">Migrate from Spectre.Cli</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/appendix">Appendix</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/appendix/colors">Colors</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/appendix/styles">Styles</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/appendix/borders">Borders</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/appendix/emojis">Emojis</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/appendix/spinners">Spinners</a>
                                                            </div>
                                                    </div>
                                    </div>
                                    <div class="col-md-9 col-lg-8 pt-4 pt-md-0 pb-4 px-4">
                                        <p><code>CommandApp</code> is the entry point for a <code>Spectre.Console.Cli</code> command line application. It is used to configure the settings and commands used for execution of the application. Most <code>Spectre.Console.Cli</code> applications will need to specify a custom configuration using the <code>Configure</code> method.</p>
<p>For example, the following configuration might be used to change the default behavior indicate that for <code>DEBUG</code> configuration's full exception stack traces should be outputted to the screen, and any examples defined for our commands will also be validated.</p>
<pre><code class="language-csharp">var app = new CommandApp&lt;FileSizeCommand&gt;();
app.Configure(config =&gt;
{
#if DEBUG
    config.PropagateExceptions();
    config.ValidateExamples();
#endif
});
</code></pre>
<h1 id="multiple-commands">Multiple Commands</h1>
<p>In the previous example we have a single command that is configured. For complex command line applications, it is common for them to have multiple commands (or verbs) defined. Examples of applications like this are <code>git</code>, <code>dotnet</code> and <code>gh</code>. For example, git would have an <code>commit</code> command and along with other commits like <code>add</code> or <code>rebase</code>. Each with their own settings and validation. With <code>Spectre.Console.Cli</code> we use the <code>Configure</code> method to add these commands.</p>
<p>For example, to add three different commands to the application:</p>
<pre><code class="language-csharp">var app = new CommandApp();
app.Configure(config =&gt;
{
    config.AddCommand&lt;AddCommand&gt;(&quot;add&quot;);
    config.AddCommand&lt;CommitCommand&gt;(&quot;commit&quot;);
    config.AddCommand&lt;RebaseCommand&gt;(&quot;rebase&quot;);
});
</code></pre>
<p>This configuration would allow users to run <code>app.exe add</code>, <code>app.exe commit</code>, or <code>app.exe rebase</code> and have the settings routed the appropriate command.</p>
<p>For more complex command hierarchical configurations, they can also be composed via inheritance and branching. See <a href="./composing">Composing Commands</a>.</p>
<h1 id="customizing-command-configurations">Customizing Command Configurations</h1>
<p>The <code>Configure</code> method is also used to change how help for the commands is generated. This configuration will give our command an additional alias of <code>file-size</code> and a description to be used when displaying the help. Additional, an example is specified that will be parsed and displayed for users asking for help. Multiple examples can be provided. Commands can also be marked as hidden. With this option they are still executable, but will not be displayed in help screens.</p>
<pre><code class="language-csharp">var app = new CommandApp();
app.Configure(config =&gt;
{
    config.AddCommand&lt;FileSizeCommand&gt;(&quot;size&quot;)
        .IsHidden()
        .WithAlias(&quot;file-size&quot;)
        .WithDescription(&quot;Gets the file size for a directory.&quot;)
        .WithExample(new[] {&quot;c:\\windows&quot;, &quot;--pattern&quot;, &quot;*.dll&quot;});
});
</code></pre>
<h1 id="dependency-injection">Dependency Injection</h1>
<p><code>CommandApp</code> takes care of instantiating commands upon execution. If given a custom type registrar, it will use that to resolve services defined in the command constructor.</p>
<pre><code class="language-csharp">var registrations = new ServiceCollection();
registrations.AddSingleton&lt;IGreeter, HelloWorldGreeter&gt;();

// Create a type registrar and register any dependencies.
// A type registrar is an adapter for a DI framework.
var registrar = new TypeRegistrar(registrations);

// Create a new command app with the registrar
// and run it with the provided arguments.
var app = new CommandApp&lt;DefaultCommand&gt;(registrar);
return app.Run(args);
</code></pre>
<p><code>TypeRegistrar</code> is a custom class that must be created by the user. This <a href="https://github.com/spectreconsole/spectre.console/tree/main/examples/Cli/Injection">example using <code>Microsoft.Extensions.DependencyInjection</code> as the container</a> provides an example <code>TypeRegistrar</code> and <code>TypeResolver</code> that can be added to your application with small adjustments for your DI container.</p>
<h1 id="interception">Interception</h1>
<p><code>CommandApp</code> also provides a <code>SetInterceptor</code> configuration. An interceptor is ran before all commands are executed. This is typically used for configuring logging or other infrastructure concerns.</p>
<p>All interceptors must implement <code>ICommandInterceptor</code>. Upon execution of a command, an instance of your interceptor will be called with the parsed settings. This provides an opportunity for configuring any infrastructure or modifying the settings.</p>
<p>For an example of using the interceptor to configure logging, see the <a href="https://github.com/spectreconsole/spectre.console/tree/main/examples/Cli/Logging">Serilog demo</a>.</p>

                                    </div>
                                <div class="col-lg-2 d-none d-lg-block bg-body pl-3 pt-3">
                                            <div class="border-bottom mb-3">
                                                <p class="small font-weight-bold">On This Page</p>
                                                    <p class="small"><a href="#multiple-commands">Multiple Commands</a></p>
                                                    <p class="small"><a href="#customizing-command-configurations">Customizing Command Configurations</a></p>
                                                    <p class="small"><a href="#dependency-injection">Dependency Injection</a></p>
                                                    <p class="small"><a href="#interception">Interception</a></p>
                                            </div>
                                        <p class="small font-weight-bold"><a href="https://github.com/spectreconsole/spectre.console/edit/main/docs/input/cli/commandApp.md"><i class="fad fa-pencil"></i> Edit This Page</a></p>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
        </div>
        <div id="footer" class="p-3 text-white font-size-sm">
            <div class="container">
                <div>
                    <span>© 2021 Patrik Svensson, Phil Scott</span>
                    <span class="float-right" style="color: #888888;">0.39.1-preview.0.6</span>
                </div>
            </div>
        </div>
        <script>
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();

                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
            });
        </script>
    </body>
</html>